deployment:
  enabled: true
  imagePullSecrets: [docker-login-test-example-net-9194]
  secret:
    password: AQ23sdsd
    username: admin
    host: example.com

  configMap:
    username: admin
    environment: production
    host: example.com

  volumes:
    - name: myvolume
      type: secret
      secret:
        secretName: mysecret
    - name: myvolume2
      type: configMap
      configMap:
        name: myconfigmap
    - name: myvolume3
      type: persistentVolumeClaim
      persistentVolumeClaim:
        claimName: mypvc
  volumeMounts:
    - name: myvolume
      mountPath: /etc/secret
    - name: myvolume2
      mountPath: /etc/config
    - name: myvolume3
      mountPath: /etc/pvc

  hostAliases: []
  dnsConfig:
    nameservers:
      - 10.1.2.3
      - 10.1.2.4
    searches:
      - example.net
    options:
      - name: ndots
        value: "2"
      - name: edns0

  envFromConfigMaps:
    - myconfigmap
    - mongodb-0-config

  envFromSecrets:
    - mysecret
    - mongodb-0-secret

  livenessProbe:
    httpGet:
      path: /
      port: http

  readinessProbe:
    httpGet:
      path: /
      port: http

  additionalEnvs:
    - name: NEWPASS
      valueFrom:
        secretKeyRef:
          name: mysecret
          key: test
    - name: NEWCONFIG
      valueFrom:
        configMapKeyRef:
          name: myconfig
          key: test

hooks:
  post-install:
    db-seed-import:
      image: alpine:3.18
      command: ["sh"]
      args: ["-c", 'echo "ciao"']
      imagePullPolicy: Always
      weight: 20
      affinity: &affinity
        nodeAffinity:
          requiredDuringSchedulingIgnoredDuringExecution:
            nodeSelectorTerms:
              - matchExpressions:
                  - key: kubernetes.io/e2e-az-name
                    operator: In
                    values:
                      - e2e-az1
                      - e2e-az2
      tolerations: &tolerations
        - key: "key"
          operator: "Equal"
          value: "value"
          effect: "NoSchedule"
      nodeSelector: &nodeSelector
        kubernetes.io/e2e-az-name: e2e-az1
  pre-upgrade:
    deploy:
      command: ["sh", "-c"]
      args: ["echo", "ciao"]
      weight: 10
      deletePolicy: before-hook-creation
      imagePullPolicy: Always
    s3fs:
      command: ["bin/sh", "-c"]
      args: ["echo", "ciao"]
      weight: 20
      deletePolicy: before-hook-creation
      imagePullPolicy: Always
  post-upgrade:
    cr: null

cronJobs:
  cron:
    tolerations: []
    annotations: {}
    schedule: "00 12 * * 1-5"
    serviceAccountName:
    successfulJobsHistoryLimit: 2
    failedJobsHistoryLimit: 2
    args: ["sh", "-c", 'echo "ciao"']
    resources:
      requests:
        cpu: 100m
        memory: 128Mi
    envFromConfigMaps:
      - myconfigmap
      - mongodb-0-config
    envFromSecrets:
      - mysecret
      - mongodb-0-secret
  testcron:
    schedule: "00 12 * * 1-5"
    command: ["sh", "-c"]
    args: ["echo", "ciao"]
    affinity: *affinity
    tolerations: *tolerations
    nodeSelector: *nodeSelector
    resources:
      requests:
        cpu: 1000m
        memory: 1280Mi

externalSecrets:
  mysecret:
    remote:
      key: test
    secretstore:
      kind: ClusterSecretStore
      name: mysecretstore
    secretkey: api-token
